# Документация

## Схема API
> TODO

## Схемы данных

### Vector
Схема, описывающая двухмерный вектор  
Поля:
- `double x`
- `double y`

---

### MapBuilding
Схема, описывающая строение на глобальной карте.  
Поля:
- `int id` - идентификатор строения
- `double latitude` - широта строения на карте.
- `double longitude` -  долгота
- `int[] floors_ids` - список `Domain` объектов здания, описывающих каждый этаж  
- `MapFigure outdoor_figure` - объект `MapFigure`, описывающий строение на
  глобальной карте.

---

### MapFigure
Схема, описывающая фигуру на локальной карте.  
Поля:
- `int id` - идентификатор фигуры.  
- `Vector[] vertices` - список вершин для отрисовки фигуры на карте.  
- `Vector[] border_vertices` - список вершин для обводки фигуры. Разделение необходимо для
  того, чтобы было можно отделять пол/потолок от стен, проемов для дверей.  
- `MapObject map_object` - объект `MapObject`, к которому привязана данная фигура.  

---

### MapObject
Схема объекта на карте.  
Поля:
- `int id` - идентификатор объекта.  
- `MapObjectType type` - перечисление типа объекта. Допустимые значения: `room`,
  `hall`, `stairs`, `exit`.
- `int? number` - отображаемый порядковый номер объекта. Необходим для таких
  объектов как `room`. Опциональный.
- `String name` - отображаемое имя объекта. Значение содержит ключ для
  локализации.
- `String description` - отображаемое описание объекта. Значение содержит ключ
  для локализации.
- `int? conn_entity_id` - Содержит `id` сущности, с которой данный объект
  соединяется. Например, если `type` данного объекта равен `exit`, то данное
  значение содержит идентификатор объекта `Domain`, к которому ведет объект или
  `null`, если ведет на улицу. Опциональный.
- `double? orientation_angle` - Угол направления объекта в градусах. Используется
  для отображения направления объекта типа `stairs` или других типов объектов.

---

### Domain
Объект плоского "пространства", содержащего другие объекты. Используется для
описания этажей зданий.  
Поля:
- `int id` - идентификатор
- `String name` - отображаемое имя пространства (например, порядковый номер
этажа или цокольный этаж и т.д.)
- `MapFigure[] figures` - список фигур в данном пространстве.

---

### NavPoint
Объект точки, используемой при навигации.  
Поля:
- `int domain_id` - идентификатор пространства, на котором находится эта точка.
- `Vector position` - позиция точки

## Компоненты системы
> TODO

## Схема базы данных
<img src="https://user-images.githubusercontent.com/36979003/222919825-a5fe799c-85af-4788-bd07-661806db6fdb.png" width="800" />

